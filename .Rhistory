paR_OTR <- ggplot(rate_care_day_otr_long[rate_care_day_otr_long$variable!="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value
,group=variable
,colour=variable)) +
geom_line(size=1) +
geom_point(data=rate_care_day_otr_long[rate_care_day_otr_long$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,size=3) +
geom_smooth(data=rate_care_day_otr_long[rate_care_day_otr_long$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,fill=NA
,method="lm") +
geom_smooth(fill=NA, method="lm") +
scale_y_continuous(labels = percent) +
labs(x = "", y = "",
title = "Percent of Care-Days On-The-Run") +
scale_color_manual(name="", values=c(poc_colors[c(1,4,2)])) +
facet_grid(~age_in_fy) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
paR_OTR
paR_OTR <- ggplot(rate_care_day_otr_long[rate_care_day_otr_long$variable!="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value
,group=variable
,colour=variable)) +
geom_line(size=1) +
geom_point(data=rate_care_day_otr_long[rate_care_day_otr_long$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,size=3) +
geom_smooth(data=rate_care_day_otr_long[rate_care_day_otr_long$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,fill=NA
,method="lm") +
geom_smooth(fill=NA, method="lm") +
scale_y_continuous(labels = percent) +
labs(x = "", y = "",
title = 'Percent of Care-Days "On-The-Run"') +
scale_color_manual(name="", values=c(poc_colors[c(1,4,2)])) +
facet_grid(~age_in_fy) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
paR_OTR
class(rate_care_day_otr_long$age_in_fy)
otr <- rate_care_day_otr_long
otr$age <- as.character(otr$age_in_fy)
otr$age = str_replace(otr$age, pattern = " Care Days", "s")
otr$age = str_replace(otr$age, pattern = "Year Old", "Year-Old")
head(otr)
paR_OTR <- ggplot(otr[otr$variable!="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value
,group=variable
,colour=variable)) +
geom_line(size=1) +
geom_point(data=otr[otr$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,size=3) +
geom_smooth(data=otr[otr$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,fill=NA
,method="lm") +
geom_smooth(fill=NA, method="lm") +
scale_y_continuous(labels = percent) +
labs(x = "", y = "",
title = 'Percent of Care-Days "On-The-Run"') +
scale_color_manual(name="", values=c(poc_colors[c(1,4,2)])) +
facet_grid(~age) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
paR_OTR
ggsave("otr.pdf", plot = paR_OTR, width = 10, height = 6)
ggsave("otr.pdf", plot = paR_OTR, width = 10, height = 4)
ggsave("otr.pdf", plot = paR_OTR, width = 14, height = 6)
ggsave("otr.pdf", plot = paR_OTR, width = 20, height = 6)
ggsave("otr.pdf", plot = paR_OTR, width = 12, height = 6)
ggsave("otr.pdf", plot = paR_OTR, width = 18, height = 6)
ggsave("otr.pdf", plot = paR_OTR, width = 12, height = 4)
ggsave("otr.pdf", plot = paR_OTR, width = 15, height = 5)
fortunes::fortune("spaces")
fortunes::fortune("spaces", showMatches = T)
safe.care = sp_rate_care_day_maltreatment_clean %>%
mutate(safe.rate = 1e5 - care.day.incident.rate) %>%
select(fiscal.yr, safe.rate)
head(safe.care)
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line() +
geom_point() +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line() +
geom_point() +
scale_y_continuous(limits = c(0, 1e5), expand = c(0, 0)) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line() +
geom_point(size = 2) +
scale_y_continuous(limits = c(0, 1e5), expand = c(0, 0)) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line() +
geom_point(size = 2) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0)) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line() +
geom_point(size = 2) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0), labels = comma_format()) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line() +
geom_point(size = 2) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0.",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
head(safe.care)
head(sp_rate_care_day_maltreatment_clean)
safe.care = sp_rate_care_day_maltreatment_clean %>%
mutate(safe.rate = 1e5 - care.day.incident.rate,
ucl = 1e5 - lcl,
lcl = 1e5 - ucl) %>%
select(fiscal.yr, safe.rate, ucl, lcl)
head(safe.care)
safe.care = sp_rate_care_day_maltreatment_clean %>%
mutate(safe.rate = 1e5 - care.day.incident.rate,
ucl.old = ucl,
ucl = 1e5 - lcl,
lcl = 1e5 - ucl.old) %>%
select(fiscal.yr, safe.rate, ucl, lcl)
head(safe.care)
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[4])
geom_line(color = poc_colors[1]) +
geom_point(size = 2, color = poc_colors[1]) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0.",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[4]) +
geom_line(color = poc_colors[1]) +
geom_point(size = 2, color = poc_colors[1]) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0.",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0.",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99000, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99500, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99990, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99980, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
range(safe.care$fiscal.yr)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99980, 1e5), expand = c(0, 0), labels = comma_format()) +
scale_x_continuous(breaks = seq(2000, 2014, by = 4)) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99950, 1e5), expand = c(0, 0), labels = comma_format()) +
scale_x_continuous(breaks = seq(2000, 2014, by = 4)) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99970, 1e5), expand = c(0, 0), labels = comma_format()) +
scale_x_continuous(breaks = seq(2000, 2014, by = 4)) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99985, 1e5), expand = c(0, 0), labels = comma_format()) +
scale_x_continuous(breaks = seq(2000, 2014, by = 4)) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99980, 1e5), expand = c(0, 0), labels = comma_format()) +
scale_x_continuous(breaks = seq(2000, 2014, by = 4)) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
?grep
coordinate <- "{u'type': u'Point', u'coordinates': [-2.824602, 53.235397]}"
str_extract_all(coordinate, pattern = "\\d")
str_extract_all(coordinate, pattern = "\\d*")
str_extract_all(coordinate, pattern = "[-]\\d*")
str_extract_all(coordinate, pattern = "[-]\\d+")
?str_extract_all
str_extract_all(coordinate, perl("?-\\d*?.\\d*"))
str_extract_all(coordinate, perl("-?\\d*.?\\d*"))
coordinate
str_extract(coordinate, perl("-?\\d*.?\\d*"))
str_extract(coordinate, perl("-?\\d+.?\\d+"))
str_extract_all(coordinate, perl("-?\\d+.?\\d+"))
as.numeric(str_extract_all(coordinate, perl("-?\\d+.?\\d+")))
class(coordinate)
as.numeric(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))
(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))
do.call(rbind, str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))
as.numeric(do.call(rbind, str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+"))))
lapply(do.call(rbind, str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+"))), as.numeric)
sapply(do.call(rbind, str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+"))), as.numeric)
as.numeric(unlist(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+"))))
matrix(as.numeric(unlist(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))), ncol = 2)
matrix(as.numeric(unlist(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))), ncol = 2, byrow = T)
matrix((unlist(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))), ncol = 2, byrow = T)
as.numeric(matrix((unlist(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))), ncol = 2, byrow = T))
library(ggplot2)
library(plotflow)
library(pocr)
library(dplyr)
library(mstate)
#setwd("S:/Data Portal/annual_report")
load("graph_dat.RData")
names(rate_care_day_otr) <- make.names(names(rate_care_day_otr))
rate_care_day_otr
ggplot(rate_care_day_otr, aes(x = fical_yr, y = On.The.Run.Rate)) +
facet_wrap(~ age_in_fy)
ggplot(rate_care_day_otr, aes(x = fical_yr, y = On.The.Run.Rate)) +
geom_point() +
facet_wrap(~ age_in_fy)
ggplot(rate_care_day_otr, aes(x = fiscal_yr, y = On.The.Run.Rate)) +
geom_point() +
facet_wrap(~ age_in_fy)
ggplot(rate_care_day_otr, aes(x = fiscal_yr, y = On.The.Run.Rate)) +
geom_point() +
stat_smooth(method = "lm") +
facet_wrap(~ age_in_fy)
names(rate_care_day_movement_tx) <- make.names(names(rate_care_day_movement_tx))
head(rate_care_day_movement_tx)
ggplot(rate_care_day_movement_tx, aes(x = fiscal_yr, y = Movement.Rate)) +
geom_point() +
facet_grid(type ~ years_in_care)
ggplot(rate_care_day_movement_tx, aes(x = fiscal_yr, y = Movement.Rate)) +
geom_point() +
facet_grid(years_in_care ~ type)
movement_tx %>% group_by(type, years_in_care) %>%
filter(fiscal_yr %in% c(2000, 2014))
rate_care_day_movement_tx %>% group_by(type, years_in_care) %>%
filter(fiscal_yr %in% c(2000, 2014))
rate_care_day_movement_tx %>% group_by(type, years_in_care) %>%
arrange(fiscal_yr) %>%
summarize(y2000 = first(Movement.Rate),
y2014 = last(Movement.Rate))
movement_tx <- rate_care_day_movement_tx %>% select(fiscal_yr, Movement.Rate) %>%
split(f = list(rate_care_day_movement_tx$type, rate_care_day_movement_tx$years_in_care))
names(movement_tx) = make.names(names(movement_tx))
movement_tx
aa = c(list(x = 1), movement_tx)
length(aa)
length(movement_tx)
movement_tx[[1]]
spark(movement_tx[[1]])
source('C:/Users/gregorp.NEBULA2/Desktop/GitHub/annual_report/spark helper.R')
spark(movement_tx[[1]])
sparktable(movement_tx[[1]])
names(movement_tx)
class(rate_care_day_movement_tx$years_in_care)
movement_tx[[2]]
names(movement_tx)
rcdm = rate_care_day_movement_tx
head(rcdm)
levels(rcdm$type)
unique(rcdm$type)
rcdm %<>% mutate(type = factor(type, levels = c("Transition to Foster",
"Transition to Kin",
"Transition to Group")),
years_in_care = factor(paste("years", years_in_care)))
library(ggplot2)
library(pocr)
library(dplyr)
rcdm %<>% mutate(type = factor(type, levels = c("Transition to Foster",
"Transition to Kin",
"Transition to Group")),
years_in_care = factor(paste("years", years_in_care)))
library(magrittr)
library(magrittr)
rcdm %<>% mutate(type = factor(type, levels = c("Transition to Foster",
"Transition to Kin",
"Transition to Group")),
years_in_care = factor(paste("years", years_in_care)))
head(rcdm)
movement_tx <- rcdm %>% select(fiscal_yr, Movement.Rate) %>%
split(f = list(rcdm$type, rcdm$years_in_care))
names(movement_tx) = make.names(names(movement_tx))
names(movement_tx)
movement_tx <- rcdm %>% select(fiscal_yr, Movement.Rate) %>%
split(f = list(rcdm$years_in_care, rcdm$type))
names(movement_tx) = make.names(names(movement_tx))
names(movement_tx)
rcdm %>% group_by(type, years_in_care) %>%
arrange(fiscal_yr) %>%
summarize(y2000 = first(Movement.Rate),
y2014 = last(Movement.Rate))
rcdm %>% group_by(type, years_in_care) %>%
arrange(fiscal_yr) %>%
summarize(y2000 = round(first(Movement.Rate), 1),
y2014 = round(last(Movement.Rate), 1))
doy2014f<-(today-as.POSIXct(as.Date("2014-01-01 00:00", tzone="UTC")))/86400
(today-as.POSIXct(as.Date("2014-01-01 00:00", tzone="UTC")))/86400
library("lubridate")
(today-as.POSIXct(as.Date("2014-01-01 00:00", tzone="UTC")))/86400
(Sys.time() - as.POSIXct(as.Date("2014-01-01 00:00", tzone="UTC")))/86400
p <- plyr::dlply(dat, .(v3), function(x){
ggplot(x,aes(v1, v2)) +
geom_point()})
set.seed(999)
dat <- data.frame(
v1 = rep(c("A","B","C"),25),
v2 = runif(75,-1,2),
v3 = sample(c("hippo", "smoke", "meat"), 75, replace=T))
p <- plyr::dlply(dat, .(v3), function(x){
ggplot(x,aes(v1, v2)) +
geom_point()})
length(p)
p[[1]]
p[[2]]
p[[3]]
lapply(p, class)
multiplot <- function(..., plotlist=NULL, file, cols=1, layout=NULL) {
require(grid)
# Make a list from the ... arguments and plotlist
plots <- c(list(...), plotlist)
numPlots = length(plots)
# If layout is NULL, then use 'cols' to determine layout
if (is.null(layout)) {
# Make the panel
# ncol: Number of columns of plots
# nrow: Number of rows needed, calculated from # of cols
layout <- matrix(seq(1, cols * ceiling(numPlots/cols)),
ncol = cols, nrow = ceiling(numPlots/cols))
}
if (numPlots==1) {
print(plots[[1]])
} else {
# Set up the page
grid.newpage()
pushViewport(viewport(layout = grid.layout(nrow(layout), ncol(layout))))
# Make each plot, in the correct location
for (i in 1:numPlots) {
# Get the i,j matrix positions of the regions that contain this subplot
matchidx <- as.data.frame(which(layout == i, arr.ind = TRUE))
print(plots[[i]], vp = viewport(layout.pos.row = matchidx$row,
layout.pos.col = matchidx$col))
}
}
}
multiplot(plotlist=p, cols=2)
?dlply
?dplyr::dlply
load("graph_dat.RData")
load("sibs-recalculated.Rdata")
sibs
ggplot(sibs, aes(x = state_fiscal_year_yyyy, y = prp_some_tgh)) + geom_line()
library(ggplot2)
ggplot(sibs, aes(x = state_fiscal_year_yyyy, y = prp_some_tgh)) + geom_line()
ggplot(sibs, aes(x = state_fiscal_yyyy, y = prp_some_tgh)) + geom_line()
ggplot(sibs, aes(x = state_fiscal_yyyy, y = prp_some_tgh)) + geom_line() + scale_y_continuous(limits = c(0.7, 1))
