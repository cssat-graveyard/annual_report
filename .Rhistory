title = "Cumulative Percentage Non-Disable Foster Youth\nExiting High School Before Graduation") +
facet_wrap(~ cohort.year) +
theme_bw() +
theme(panel.grid.minor = element_blank(),
strip.background = element_blank())
pR_D
pR_D <- ggplot(hsc[hsc$fl_disability==0,]
,aes(x=`Grade Level` + 0.5
,y=`Drop Out Percent` / 100
)) +
geom_step(size=1.8, direction = "vh") +
scale_x_continuous(limits = c(8.5, 12.5)) +
scale_y_continuous(limits = c(0, .42), labels = percent_format(),
expand = c(0, 0)) +
labs(x = "Grade Level",
y = "",
title = "Cumulative Percentage Non-Disable Foster Youth\nExiting High School Before Graduation") +
facet_wrap(~ cohort.year) +
theme_bw() +
theme(panel.grid.minor = element_blank(),
strip.background = element_blank())
pR_D
pR_D <- ggplot(hsc[hsc$fl_disability==0,]
,aes(x=`Grade Level` + 0.5
,y=`Drop Out Percent` / 100
)) +
geom_step(size=1.8, direction = "vh") +
scale_x_continuous(limits = c(8.5, 12.5)) +
scale_y_continuous(limits = c(0, .42), labels = percent_format(),
expand = c(0, 0)) +
labs(x = "Grade Level",
y = "",
title = "Cumulative Percentage Non-Disabled Foster Youth\nExiting High School Before Graduation") +
facet_wrap(~ cohort.year) +
theme_bw() +
theme(panel.grid.minor = element_blank(),
strip.background = element_blank())
pR_D
ggsave(file="droupout.pdf")
ggsave(file="droupout.pdf", width = 7, height = 4.5)
ggsave(file="droupout.pdf", width = 8, height = 4.5)
df1 <- structure(list(id = 1:3,
book_id = c("[\"19167120\", \"237494310\",\"195166798\"]",
"[\"19167120\",\"237494310\",\"19167120\"]", "[]")),
.Names = c("id", "book_id"),
class = "data.frame",
row.names = c(NA, -3L))
class(df1)
df1
arctan(3475/384400)
?tan
atan(3475/384400)
atan(139822/384400)
.7/pi
.00904 * 2
.00904 * 2 / pi
?append
append(1:5, 0:1, after = 3)
hk = 7000000 / 1104
hk
data()
x <- data()
head(x)
names(x)
grep("state", x$title)
grep("state", x$title, fixed = T)
x$title
str(x)
x$results
grep("state", x$results)
?constants
?constant
?pi
poc_con <- odbcConnect("POC")
rate_care_day_otr <- sqlQuery(poc_con,"select
fiscal_yr
,age_in_fy
,care_days_otr*1.0/care_days otr_rate
from ca_ods.base.placement_care_days_otr
where excludes_7day = 1
and excludes_nondcfs = 1
and excludes_trh = 1
and cd_cnty = 0
and age_in_fy >= 13
order by fiscal_yr, age_in_fy")
head(rate_care_day_otr)
poc_con
rate_care_day_otr <- sqlQuery(poc_con, "select
fiscal_yr
,age_in_fy
,care_days_otr*1.0/care_days otr_rate
from ca_ods.base.placement_care_days_otr
where excludes_7day = 1
and excludes_nondcfs = 1
and excludes_trh = 1
and cd_cnty = 0
and age_in_fy >= 13
order by fiscal_yr, age_in_fy")
load("graph_dat.RData")
head(rate_care_day_otr_long)
paR_OTR
paR_OTR <- ggplot(rate_care_day_otr_long[rate_care_day_otr_long$variable!="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value
,group=variable
,colour=variable)) +
geom_line(size=1) +
geom_point(data=rate_care_day_otr_long[rate_care_day_otr_long$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,size=3) +
geom_smooth(data=rate_care_day_otr_long[rate_care_day_otr_long$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,fill=NA
,method="lm") +
geom_smooth(fill=NA, method="lm") +
scale_y_continuous(labels = percent) +
xlab("") +
ylab("On-The-Run Rate (Age-Specific)") +
scale_color_manual(name="", values=c(poc_colors[c(1,4,2)])) +
facet_grid(~age_in_fy) +
theme_bw() +
theme(legend.position="bottom")
paR_OTR
paR_OTR <- ggplot(rate_care_day_otr_long[rate_care_day_otr_long$variable!="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value
,group=variable
,colour=variable)) +
geom_line(size=1) +
geom_point(data=rate_care_day_otr_long[rate_care_day_otr_long$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,size=3) +
geom_smooth(data=rate_care_day_otr_long[rate_care_day_otr_long$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,fill=NA
,method="lm") +
geom_smooth(fill=NA, method="lm") +
scale_y_continuous(labels = percent) +
xlab("") +
ylab("On-The-Run Rate (Age-Specific)") +
scale_color_manual(name="", values=c(poc_colors[c(1,4,2)])) +
facet_grid(~age_in_fy) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
paR_OTR
paR_OTR <- ggplot(rate_care_day_otr_long[rate_care_day_otr_long$variable!="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value
,group=variable
,colour=variable)) +
geom_line(size=1) +
geom_point(data=rate_care_day_otr_long[rate_care_day_otr_long$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,size=3) +
geom_smooth(data=rate_care_day_otr_long[rate_care_day_otr_long$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,fill=NA
,method="lm") +
geom_smooth(fill=NA, method="lm") +
scale_y_continuous(labels = percent) +
labs(x = "", y = "",
title = "Percent of Care-Days On-The-Run") +
scale_color_manual(name="", values=c(poc_colors[c(1,4,2)])) +
facet_grid(~age_in_fy) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
paR_OTR
paR_OTR <- ggplot(rate_care_day_otr_long[rate_care_day_otr_long$variable!="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value
,group=variable
,colour=variable)) +
geom_line(size=1) +
geom_point(data=rate_care_day_otr_long[rate_care_day_otr_long$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,size=3) +
geom_smooth(data=rate_care_day_otr_long[rate_care_day_otr_long$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,fill=NA
,method="lm") +
geom_smooth(fill=NA, method="lm") +
scale_y_continuous(labels = percent) +
labs(x = "", y = "",
title = 'Percent of Care-Days "On-The-Run"') +
scale_color_manual(name="", values=c(poc_colors[c(1,4,2)])) +
facet_grid(~age_in_fy) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
paR_OTR
class(rate_care_day_otr_long$age_in_fy)
otr <- rate_care_day_otr_long
otr$age <- as.character(otr$age_in_fy)
otr$age = str_replace(otr$age, pattern = " Care Days", "s")
otr$age = str_replace(otr$age, pattern = "Year Old", "Year-Old")
head(otr)
paR_OTR <- ggplot(otr[otr$variable!="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value
,group=variable
,colour=variable)) +
geom_line(size=1) +
geom_point(data=otr[otr$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,size=3) +
geom_smooth(data=otr[otr$variable=="On-The-Run Rate",]
,aes(x=fiscal_yr
,y=value)
,fill=NA
,method="lm") +
geom_smooth(fill=NA, method="lm") +
scale_y_continuous(labels = percent) +
labs(x = "", y = "",
title = 'Percent of Care-Days "On-The-Run"') +
scale_color_manual(name="", values=c(poc_colors[c(1,4,2)])) +
facet_grid(~age) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
paR_OTR
ggsave("otr.pdf", plot = paR_OTR, width = 10, height = 6)
ggsave("otr.pdf", plot = paR_OTR, width = 10, height = 4)
ggsave("otr.pdf", plot = paR_OTR, width = 14, height = 6)
ggsave("otr.pdf", plot = paR_OTR, width = 20, height = 6)
ggsave("otr.pdf", plot = paR_OTR, width = 12, height = 6)
ggsave("otr.pdf", plot = paR_OTR, width = 18, height = 6)
ggsave("otr.pdf", plot = paR_OTR, width = 12, height = 4)
ggsave("otr.pdf", plot = paR_OTR, width = 15, height = 5)
fortunes::fortune("spaces")
fortunes::fortune("spaces", showMatches = T)
safe.care = sp_rate_care_day_maltreatment_clean %>%
mutate(safe.rate = 1e5 - care.day.incident.rate) %>%
select(fiscal.yr, safe.rate)
head(safe.care)
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line() +
geom_point() +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line() +
geom_point() +
scale_y_continuous(limits = c(0, 1e5), expand = c(0, 0)) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line() +
geom_point(size = 2) +
scale_y_continuous(limits = c(0, 1e5), expand = c(0, 0)) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line() +
geom_point(size = 2) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0)) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line() +
geom_point(size = 2) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0), labels = comma_format()) +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line() +
geom_point(size = 2) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0.",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
head(safe.care)
head(sp_rate_care_day_maltreatment_clean)
safe.care = sp_rate_care_day_maltreatment_clean %>%
mutate(safe.rate = 1e5 - care.day.incident.rate,
ucl = 1e5 - lcl,
lcl = 1e5 - ucl) %>%
select(fiscal.yr, safe.rate, ucl, lcl)
head(safe.care)
safe.care = sp_rate_care_day_maltreatment_clean %>%
mutate(safe.rate = 1e5 - care.day.incident.rate,
ucl.old = ucl,
ucl = 1e5 - lcl,
lcl = 1e5 - ucl.old) %>%
select(fiscal.yr, safe.rate, ucl, lcl)
head(safe.care)
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[4])
geom_line(color = poc_colors[1]) +
geom_point(size = 2, color = poc_colors[1]) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0.",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[4]) +
geom_line(color = poc_colors[1]) +
geom_point(size = 2, color = poc_colors[1]) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0.",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0.",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99900, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99000, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99500, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99990, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99980, 1e5), expand = c(0, 0), labels = comma_format()) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
range(safe.care$fiscal.yr)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99980, 1e5), expand = c(0, 0), labels = comma_format()) +
scale_x_continuous(breaks = seq(2000, 2014, by = 4)) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99950, 1e5), expand = c(0, 0), labels = comma_format()) +
scale_x_continuous(breaks = seq(2000, 2014, by = 4)) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99970, 1e5), expand = c(0, 0), labels = comma_format()) +
scale_x_continuous(breaks = seq(2000, 2014, by = 4)) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99985, 1e5), expand = c(0, 0), labels = comma_format()) +
scale_x_continuous(breaks = seq(2000, 2014, by = 4)) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
safe.care.plot = ggplot(safe.care, aes(x = fiscal.yr, y = safe.rate)) +
geom_line(aes(y = ucl), color = poc_colors[2]) +
geom_line(aes(y = lcl), color = poc_colors[1]) +
geom_line(color = poc_colors[4]) +
geom_point(size = 2, color = poc_colors[4]) +
scale_y_continuous(limits = c(99980, 1e5), expand = c(0, 0), labels = comma_format()) +
scale_x_continuous(breaks = seq(2000, 2014, by = 4)) +
labs(x = "", y = "Note: y-axis does not start at 0",
title = "Safe Care-Days per 100,000 Care-Days") +
theme_bw() +
theme(legend.position="bottom",
panel.grid.minor = element_blank(),
strip.background = element_blank())
ggsave("safe-care.pdf", plot = safe.care.plot, width = 7, height = 5)
?grep
coordinate <- "{u'type': u'Point', u'coordinates': [-2.824602, 53.235397]}"
str_extract_all(coordinate, pattern = "\\d")
str_extract_all(coordinate, pattern = "\\d*")
str_extract_all(coordinate, pattern = "[-]\\d*")
str_extract_all(coordinate, pattern = "[-]\\d+")
?str_extract_all
str_extract_all(coordinate, perl("?-\\d*?.\\d*"))
str_extract_all(coordinate, perl("-?\\d*.?\\d*"))
coordinate
str_extract(coordinate, perl("-?\\d*.?\\d*"))
str_extract(coordinate, perl("-?\\d+.?\\d+"))
str_extract_all(coordinate, perl("-?\\d+.?\\d+"))
as.numeric(str_extract_all(coordinate, perl("-?\\d+.?\\d+")))
class(coordinate)
as.numeric(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))
(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))
do.call(rbind, str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))
as.numeric(do.call(rbind, str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+"))))
lapply(do.call(rbind, str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+"))), as.numeric)
sapply(do.call(rbind, str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+"))), as.numeric)
as.numeric(unlist(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+"))))
matrix(as.numeric(unlist(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))), ncol = 2)
matrix(as.numeric(unlist(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))), ncol = 2, byrow = T)
matrix((unlist(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))), ncol = 2, byrow = T)
as.numeric(matrix((unlist(str_extract_all(rep(coordinate, 4), perl("-?\\d+.?\\d+")))), ncol = 2, byrow = T))
